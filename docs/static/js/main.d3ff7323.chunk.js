(this.webpackJsonprm=this.webpackJsonprm||[]).push([[0],{23:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a,c=n(1),i=n.n(c),r=n(17),s=n.n(r),o=n(4),l=n(16),u=n(25),d={startLogin:"[AUTH] Start Login",login:"[AUTH] Login",lotout:"[AUTH] Logout",startLoading:"[UI] Start Loading",finishLoading:"[UI] Finish Loading",startFetch:"[DATA] Start fething characters",loadCharacters:"[DATA] SET characters",setFavorite:"[DATA] Set item favorite",unsetFavorite:"[DATA] Unset item favorite",retrieveFavorites:"[DATA] Retrieve favorites"},j={_id:"",name:"unidentified",email:"unidentifed"},h=n(3),b={isLoading:!1,items:[],favorites:[],paginInfo:{pages:null,next:null,prev:null}},m={isLoading:!1},p="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,f=Object(l.b)({characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.loadCharacters:return Object(h.a)(Object(h.a)({},e),{},{isLoading:t.payload.isLoading,items:t.payload.items,paginInfo:t.payload.info});case d.setFavorite:case d.unsetFavorite:return Object(h.a)(Object(h.a)({},e),{},{favorites:t.payload});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.login:return{_id:t.payload._id,name:t.payload.displayName,email:t.payload.email,token:t.payload.token};case d.logout:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.startLoading:case d.finishLoading:return Object(h.a)(Object(h.a)({},e),{},{isLoading:t.payload.isLoading});default:return e}}}),O=function(e){return Object(l.d)(f,e,p(Object(l.a)(u.a)))},g=(n(36),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))}),x=n(11),v=n(12),N=n(5),y=n(19),C=(n(37),n(0)),w=function(e){var t=e.user;return Object(C.jsxs)("nav",{className:"navbar",children:[Object(C.jsx)("div",{className:"navbar-logo",children:Object(C.jsx)("img",{src:"http://api.damianrossi.com/dist/img/logo.png",alt:"Created by Damian Rossi"})}),Object(C.jsx)("ul",{className:"navbar-navigation",children:[{sectionName:"Characters",link:"/characters"},{sectionName:"Favs",link:"/favorites"}].map((function(e){return Object(C.jsx)("li",{className:"navbar-linkContainer",children:Object(C.jsx)(v.b,{to:e.link,className:"navbar-link",activeClassName:"active",children:e.sectionName})},e.sectionName)}))}),Object(C.jsxs)("ul",{className:"navbar-navigation",children:[Object(C.jsx)("li",{className:"navbar-linkContainer",children:Object(C.jsxs)("span",{children:["Welcome, ",null===t||void 0===t?void 0:t.name]})}),Object(C.jsx)("li",{className:"navbar-linkContainer",children:Object(C.jsx)("button",{type:"submit",className:"navbar-logout",onClick:void console.log("shutting of"),children:Object(C.jsx)("i",{className:"logout fa fa-power-off","aria-hidden":"true"})})})]})]})},S=["user","isAuthenticated","component"],k=function(e){var t=e.user,n=e.isAuthenticated,a=e.component,c=Object(y.a)(e,S);return Object(C.jsxs)("div",{className:"main",children:[Object(C.jsx)(w,{user:t}),Object(C.jsx)(N.b,Object(h.a)(Object(h.a)({},c),{},{component:function(e){return n?Object(C.jsx)(a,Object(h.a)(Object(h.a)({},e),{},{user:t})):Object(C.jsx)(N.a,{to:"/auth/login"})}}))]})},L=["isAuthenticated","component"],T=function(e){var t=e.isAuthenticated,n=e.component,a=Object(y.a)(e,L);return Object(C.jsx)(N.b,Object(h.a)(Object(h.a)({},a),{},{component:function(e){return t?Object(C.jsx)(N.a,{to:"/"}):Object(C.jsx)(n,Object(h.a)({},e))}}))},A=n(10),_=n.n(A),E=n(14),F="http://localhost:4000/api/",I="http://localhost:4000/api/";function D(){return(D=Object(E.a)(_.a.mark((function e(t,n){var a,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={email:t,password:n},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch("".concat(F,"auth/signup"),c).then((function(e){return e.json()})).then(a).catch((function(e){console.error(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return U=Object(E.a)(_.a.mark((function e(){var t,n,c,i=arguments;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"1",(a=JSON.parse(window.localStorage.getItem("loggedUser")).token)&&void 0!==a){e.next=4;break}return e.abrupt("return");case 4:return n={method:"GET",Authorization:"Bearer ".concat(a),headers:{"Content-Type":"application/json",Accept:"*/*"}},c="".concat(I,"chars/fetch/").concat(t),e.next=8,fetch("".concat(c),n).then((function(e){return"403"===e.status.toString()&&(window.localStorage.removeItem("loggedUser"),window.location.replace("/login")),e.json()})).catch((function(e){console.error(e)}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function J(){return(J=Object(E.a)(_.a.mark((function e(t){var n,c,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*"},Authorization:"Bearer ".concat(a),body:JSON.stringify(t)},c="".concat(I,"chars/create/"),e.next=4,fetch("".concat(c),n).then((function(e){return e.json()})).catch((function(e){console.error(e)}));case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(E.a)(_.a.mark((function e(t){var n,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return n={method:"GET",headers:{"Content-Type":"application/json",Accept:"*/*"},Authorization:"Bearer ".concat(a)},c="".concat(I,"chars/favorites/").concat(t),e.next=6,fetch("".concat(c),n).then((function(e){return e.json()})).catch((function(e){console.error(e)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(E.a)(_.a.mark((function e(t){var n,c,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"DELETE",headers:{"Content-Type":"application/json",Accept:"*/*"},Authorization:"Bearer ".concat(a)},c="".concat(I,"chars/delete/").concat(t),e.next=4,fetch("".concat(c),n).then((function(e){return e.json()})).catch((function(e){console.error(e)}));case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.localStorage.getItem("loggedUser")&&(a=JSON.parse(window.localStorage.getItem("loggedUser")).token);var H=function(){return{type:d.startLoading,payload:{isLoading:!0}}},z=function(){return{type:d.finishLoading,payload:{isLoading:!1}}},M=function(e,t){return function(n){setTimeout((function(){n(H()),function(e,t){return D.apply(this,arguments)}(e,t).then((function(e){var t=e.user,a=e.token,c={_id:t._id,displayName:t.username,email:t.email,token:a};n(R(c)),function(e){window.localStorage.setItem("loggedUser",JSON.stringify(e))}(c),n(z())})).catch((function(e){console.error("->",e),n(z())}))}),1)}},R=function(e){var t=e._id,n=e.displayName,a=e.email,c=e.token;return{type:d.login,payload:{_id:t,displayName:n,email:a,token:c}}},G=n(18),X=(n(44),function(){var e=Object(o.b)(),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(x.a)(t,2),a=n[0],i=n[1];return[a,function(e){var t=e.target;i(Object(h.a)(Object(h.a)({},a),{},Object(G.a)({},t.name,t.value)))},function(){i(e)}]}({email:"eve.holt@reqres.in",password:"cityslicka"}),n=Object(x.a)(t,2),a=n[0],i=n[1],r=Object(o.c)((function(e){return e.ui})).isLoading,s=a.email,l=a.password;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{className:"login_container",children:Object(C.jsxs)("div",{className:"loginComponent",children:[Object(C.jsxs)("div",{className:"loginComponent-img",children:[Object(C.jsx)("img",{src:"https://rickandmortyapi.com/api/character/avatar/370.jpeg",alt:"login in rick and morti",width:"180"}),Object(C.jsx)("h3",{className:"",children:"Login"})]}),Object(C.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(M(s,l))},className:"loginComponent-form",children:[Object(C.jsx)("label",{className:"loginComponent-label",children:Object(C.jsx)("input",{type:"text",placeholder:"Email",name:"email",className:"loginComponent-inputText",autoComplete:"off",value:s,onChange:i})}),Object(C.jsx)("label",{className:"loginComponent-label",children:Object(C.jsx)("input",{type:"password",placeholder:"Password",name:"password",className:"loginComponent-inputText",value:l,onChange:i})}),Object(C.jsx)("button",{disabled:r,type:"submit",className:"loginComponent-submit",children:"Login"})]})]})})})}),q=function(){return Object(C.jsx)("div",{className:"auth__main",children:Object(C.jsx)("div",{className:"auth__box-container",children:Object(C.jsxs)(N.d,{children:[Object(C.jsx)(N.b,{exact:!0,path:"/auth/login",component:X}),Object(C.jsx)(N.a,{to:"/auth/login"})]})})})},V=(n(45),function(){return Object(C.jsx)("div",{className:"spinner-container",children:Object(C.jsx)("div",{className:"spinner"})})}),W=function(e){return function(t){t(H()),function(){return U.apply(this,arguments)}(e).then((function(e){t(K(e)),t(z())})).catch((function(e){console.error(e),t(z())}))}},K=function(e){var t=e.results,n=e.info;return{type:d.loadCharacters,payload:{isLoading:!1,items:t,info:{next:n.next,prev:n.prev,pages:n.pages}}}},Q=function(e){return function(t){setTimeout((function(){(function(e){return P.apply(this,arguments)})(e).then((function(e){return t($(e))}))}))}},Y=function(e,t){return function(n){var a=Object(h.a)(Object(h.a)({},e),{},{user_id:t});setTimeout((function(){(function(e){return J.apply(this,arguments)})(a).then((function(e){return n($(e))}))}))}},Z=function(e){return function(t){setTimeout((function(){(function(e){return B.apply(this,arguments)})(e).then((function(e){return t($(e))}))}))}},$=function(e){return{type:d.setFavorite,payload:e}},ee=(n(46),n(47),function(e){var t=e.handleClose,n=e.character;return Object(C.jsx)("div",{className:"detail-itemContainer",children:Object(C.jsxs)("div",{className:"detail-itemMainContent",children:[Object(C.jsxs)("div",{className:"detail-itemHeader",children:[Object(C.jsx)("button",{className:"detail-buttonClose",onClick:t,children:"x"}),Object(C.jsx)("figure",{className:"detail-imageContainer",children:Object(C.jsx)("img",{src:n.image,title:n.name,alt:n.name,className:"detail-picture"})}),Object(C.jsxs)("h1",{className:"detail-name",children:[Object(C.jsx)("span",{children:"Details"}),Object(C.jsx)("br",{}),n.name]})]}),Object(C.jsxs)("ul",{className:"detail-itemContent",children:[Object(C.jsxs)("li",{className:"item-info",children:["status:",Object(C.jsx)("strong",{children:Object(C.jsxs)("span",{className:"item-detail",children:[" ",n.status," "]})})]}),Object(C.jsxs)("li",{className:"item-info",children:["species:",Object(C.jsx)("strong",{children:Object(C.jsxs)("span",{className:"item-detail",children:[" ",n.species," "]})})]}),n.type&&Object(C.jsxs)("li",{className:"item-info",children:["Type:",Object(C.jsx)("strong",{children:Object(C.jsxs)("span",{className:"item-detail",children:[" ",n.type," "]})})]}),Object(C.jsxs)("li",{className:"item-info",children:["type:",Object(C.jsx)("strong",{children:Object(C.jsxs)("span",{className:"item-detail",children:[" ",n.type," "]})})]}),Object(C.jsxs)("li",{className:"item-info",children:["gender:",Object(C.jsx)("strong",{children:Object(C.jsxs)("span",{className:"item-detail",children:[" ",n.gender," "]})})]}),Object(C.jsxs)("li",{className:"item-info",children:["location:",Object(C.jsx)("strong",{children:Object(C.jsxs)("span",{className:"item-detail",children:[" ",n.location.name]})})]}),Object(C.jsxs)("li",{className:"item-info",children:["episode:",Object(C.jsx)("strong",{children:Object(C.jsxs)("span",{className:"item-detail",children:[" ",n.episode.length," Episode/s "]})})]})]})]})})}),te=function(e){var t=e.character,n=e.isSelected,a=t.name,i=t.status,r=t.species,s=t.image,l=Object(o.b)(),u=Object(c.useState)(!1),d=Object(x.a)(u,2),j=d[0],h=d[1],b=Object(o.c)((function(e){return e.auth._id})),m=Object(o.c)((function(e){return n?e.characters.favorites.find((function(e){return e.id===t.id}))._id:null})),p=function(){h(!j)};return Object(C.jsxs)("div",{className:"character-itemContainer",children:[Object(C.jsxs)("div",{className:"character-itemHeader",children:[Object(C.jsx)("figure",{className:"character-imageContainer",children:Object(C.jsx)("img",{src:s,title:a,alt:a})}),Object(C.jsxs)("h3",{className:"character-name",children:[a," "]})]}),Object(C.jsxs)("div",{className:"character-itemContent",children:[Object(C.jsxs)("p",{children:["Status: ",Object(C.jsxs)("strong",{children:[" ",i," "]})]}),Object(C.jsxs)("p",{children:["Species: ",Object(C.jsxs)("strong",{children:[" ",r," "]})]})]}),Object(C.jsx)("span",{"data-testid":"switcher",className:"switch-container ".concat(n&&"active"),onClick:function(){l((n=!n)?Y(t,b):Z(m))},title:"toggle-favourite",children:Object(C.jsx)("span",{className:"switch-slider"})}),Object(C.jsx)("button",{className:"character-seeDetails",onClick:p,children:"See more"}),j&&Object(C.jsx)(ee,{character:t,handleClose:p})]})},ne=(n(48),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){var t=e.characters.paginInfo;return t.next||t.prev?t.next?+t.next.split("=")[1]-1:+t.prev.split("=")[1]+1:0})),n=Object(o.c)((function(e){return e.characters.paginInfo.pages}));return Object(C.jsxs)("div",{className:"paginator-container",children:[t>1&&Object(C.jsx)("button",{className:"paginator-button",onClick:function(){e(W(t-1))},children:"Prev"}),Object(C.jsx)("span",{className:"paginator-indicator",children:t}),t<n&&Object(C.jsx)("button",{className:"paginator-button",onClick:function(){e(W(t+1))},children:"Next"})]})}),ae=(n(23),function(e){var t=e.user,n=Object(o.b)(),a=Object(o.c)((function(e){return e.characters})),i=a.items,r=a.favorites;Object(c.useEffect)((function(){i&&0!==i.length||(n(W()),n(Q(t._id)))}),[n,i,t]);var s=Object(o.c)((function(e){return e.ui})).isLoading;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("section",{className:"characters-container",children:Object(C.jsx)("div",{className:"characters-items",children:s?Object(C.jsx)(V,{}):i.map((function(e){return Object(C.jsx)(te,{isSelected:r.some((function(t){return t.id===e.id})),character:e},"".concat(e.name,"-").concat(e.id))}))})}),Object(C.jsx)(ne,{})]})}),ce=(n(49),function(e){return Object(C.jsx)("div",{className:"main",children:Object(C.jsx)(ae,{user:e.user})})}),ie=function(e){var t=e.user,n=Object(o.b)(),a=Object(o.c)((function(e){return e.characters.favorites}));Object(c.useEffect)((function(){a&&0!==a.length||n(Q(t._id))}),[n,a]);var i=Object(o.c)((function(e){return e.ui})).isLoading;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("section",{className:"characters-container",children:Object(C.jsx)("div",{className:"characters-items",children:i?Object(C.jsx)(V,{}):a.map((function(e){return Object(C.jsx)(te,{isSelected:!0,character:e},"".concat(e.name,"-").concat(e.id))}))})})})},re=function(){var e=Object(o.b)(),t=Object(c.useState)(!1),n=Object(x.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(!1),s=Object(x.a)(r,2),l=s[0],u=s[1];Object(c.useEffect)((function(){u(!0);var t=window.localStorage.getItem("loggedUser");if(t){var n=JSON.parse(t);(null===n||void 0===n?void 0:n._id)&&(e(R(n)),i(!0))}else i(!1);u(!1)}),[e,u,i]);var d=Object(o.c)((function(e){return e.auth}));return Object(C.jsx)(v.a,{children:Object(C.jsxs)("div",{children:[l&&Object(C.jsx)(V,{}),Object(C.jsxs)(N.d,{children:[Object(C.jsx)(T,{path:"/auth",isAuthenticated:""!==(null===d||void 0===d?void 0:d._id)||a,component:q}),Object(C.jsx)(k,{exact:!0,path:"/",isAuthenticated:""!==(null===d||void 0===d?void 0:d._id)||a,user:d,component:ce}),Object(C.jsx)(k,{exact:!0,path:"/characters",isAuthenticated:""!==(null===d||void 0===d?void 0:d._id)||a,user:d,component:ce}),Object(C.jsx)(k,{exact:!0,path:"/favorites",isAuthenticated:""!==(null===d||void 0===d?void 0:d._id)||a,user:d,component:ie}),Object(C.jsx)(N.a,{to:"/auth/login"})]})]})})};s.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(o.a,{store:O(),children:Object(C.jsx)(re,{})})}),document.getElementById("root")),g()}},[[50,1,2]]]);
//# sourceMappingURL=main.d3ff7323.chunk.js.map